<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Control</title>
<style>
    html, body {
        margin: 0;
        height: 100%;
        width: 100%;
        background: #111;
    }

    /* Fullscreen 3x3 grid */
    .grid {
        height: 100%;
        width: 100%;
        display: grid;
        grid-template-rows: 1fr 1fr 1fr;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 4px;
        background: #000;
    }

    .btn {
        display: flex;
        align-items: center;
        justify-content: center;
        background: #000;
        color: #fff;
        font-size: clamp(1.2rem, 4.5vw, 2.2rem); /* scale with parent/viewport so mobile fullscreen stays reasonable */
        user-select: none;
        cursor: pointer;
        border-radius: 0;
        /* no hover, no active states */
    }

</style>
</head>

<body>

<div class="grid">
    <div class="btn" onclick="toggleFullscreen()">FULL</div>
    <div class="btn" onclick="send('/up')">UP</div>
    <div class="btn" onclick="sendText()">TEXT</div>

    <div class="btn" onclick="send('/left')">LEFT</div>
    <div class="btn" onclick="send('/space')">SPACE</div>
    <div class="btn" onclick="send('/right')">RIGHT</div>

    <div></div>
    <div class="btn" onclick="send('/down')">DOWN</div>
    <div></div>
</div>

<script>
async function send(path) {
    try { await fetch(path, { method: "POST" }); }
    catch (e) { console.error(e); }
}

async function sendText() {
    const input = prompt("Send text (use '/' for bottom line):");
    if (!input) return;
    const message = input.trim().slice(0, 140);
    if (!message) return;
    try {
        await fetch("/shout", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message }),
        });
    } catch (e) {
        console.error("shout failed", e);
    }
}

function toggleFullscreen() {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(() => {});
    } else {
        document.exitFullscreen().catch(() => {});
    }
}

document.addEventListener("fullscreenchange", () => {
    const fsBtn = document.querySelector(".fs-btn");
    if (document.fullscreenElement) {
        fsBtn.classList.add("hide");
    } else {
        fsBtn.classList.remove("hide");
    }
});
</script>

</body>
</html>
